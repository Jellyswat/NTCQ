
  由于单片机不会检测到电路击杀虫子的电流，因为击杀只是一瞬间的事，单片机根本无法检测到，所以要采用峰值保持电路对电压进行保持，考虑到低功耗，当没有击杀虫子时，单片机处于休眠状态，等到击杀虫子的信号传来时，单片机解除休眠，待单片机读取到信号时再对其进行清零，此时单片机又回到了休眠状态。电网经过击杀虫子会产生微小电流把电流分成两路，一路接上电阻，并把电压放大到2.7到3.3V（高电平为1),接上单片机的I\O口，此时单片机就会被唤醒。另外一路电流同样接上电阻，并把电压进行放大，利用峰值保持电路把电压保持在电容里，接上单片机的A\D口，单片机接收到后计数加一，并对峰值保持电路进行清零，要不然它保持的那个峰不会改变，至此，一只虫子的计数周期就结束了。